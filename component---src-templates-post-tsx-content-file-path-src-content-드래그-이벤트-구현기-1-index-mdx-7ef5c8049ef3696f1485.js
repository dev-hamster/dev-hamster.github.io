"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[763],{1747:function(n,a,s){s.r(a),s.d(a,{default:function(){return d}});var t=s(1151),p=s(7294);function o(n){const a=Object.assign({h2:"h2",ol:"ol",li:"li",hr:"hr",img:"img",p:"p",strong:"strong",a:"a",span:"span",code:"code",h3:"h3"},(0,t.a)(),n.components);return p.createElement(p.Fragment,null,p.createElement(a.h2,null,"목차"),"\n",p.createElement(a.ol,null,"\n",p.createElement(a.li,null,"목표 기능"),"\n",p.createElement(a.li,null,"구현 아이디어"),"\n",p.createElement(a.li,null,"상세 구현 내용"),"\n",p.createElement(a.li,null,"마무리"),"\n"),"\n",p.createElement(a.hr),"\n",p.createElement(a.h2,null,"목표 기능"),"\n",p.createElement(a.img,{src:"/369b7385eb823f18640e86533c3d6f9f/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EA%B5%AC%ED%98%84.gif",alt:"드래그 이벤트 구현"}),"\n",p.createElement(a.p,null,"윈도우 창을 드래그 할 수 있는 기능이다. react-draggable 라이브러리를 이용하면 손쉽게 구현할 수 있지만 어떻게 구현해야 하는지 알아보기 위해 구현한다."),"\n",p.createElement(a.h2,null,"구현 아이디어"),"\n",p.createElement(a.p,null,p.createElement(a.strong,null,"react-draggable 구현 참고하기")),"\n",p.createElement(a.p,null,"react-draggable 라이브러리를 사용하면 아이템을 드래그앤 드롭 이벤트를 쉽게 구현할 수 있다. 아이템은 CSS transform을 이용해 위치를 움직인다."),"\n",p.createElement(a.p,null,p.createElement(a.a,{href:"https://github.com/react-grid-layout/react-draggable"},"react-draggable 라이브러리"),"는 어떻게 구현했는지 짧게 확인해보았다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// /lib/Draggable.js</span>\n\n<span class="token keyword">type</span> <span class="token class-name">DraggableState</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  dragging<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n  dragged<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n  slackX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> slackY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n  isElementSVG<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n  prevPropsPosition<span class="token operator">:</span> <span class="token operator">?</span>ControlPosition<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">DraggableDefaultProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>DraggableCoreDefaultProps<span class="token punctuation">,</span>\n  axis<span class="token operator">:</span> <span class="token string">\'both\'</span> <span class="token operator">|</span> <span class="token string">\'x\'</span> <span class="token operator">|</span> <span class="token string">\'y\'</span> <span class="token operator">|</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n  bounds<span class="token operator">:</span> Bounds <span class="token operator">|</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  defaultClassName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n  defaultClassNameDragging<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n  defaultClassNameDragged<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n  defaultPosition<span class="token operator">:</span> ControlPosition<span class="token punctuation">,</span>\n  scale<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">DraggableProps</span> <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token operator">...</span>DraggableCoreProps<span class="token punctuation">,</span>\n  <span class="token operator">...</span>DraggableDefaultProps<span class="token punctuation">,</span>\n  positionOffset<span class="token operator">:</span> PositionOffsetControlPosition<span class="token punctuation">,</span>\n  position<span class="token operator">:</span> ControlPosition<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">Draggable</span> <span class="token keyword">extends</span> <span class="token class-name">React</span><span class="token punctuation">.</span>Component<span class="token operator">&lt;</span>DraggableProps<span class="token punctuation">,</span> DraggableState<span class="token operator">></span> <span class="token punctuation">{</span>\n    <span class="token comment">// ...</span>\n  onDrag<span class="token operator">:</span> <span class="token function-variable function">DraggableEventHandler</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">,</span> coreData<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>dragging<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>\n    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Draggable: onDrag: %j\'</span><span class="token punctuation">,</span> coreData<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> uiData <span class="token operator">=</span> <span class="token function">createDraggableData</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> coreData<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token punctuation">{</span>\n      x<span class="token operator">:</span> uiData<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n      y<span class="token operator">:</span> uiData<span class="token punctuation">.</span>y<span class="token punctuation">,</span>\n      slackX<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n      slackY<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token comment">// ...</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,p.createElement(a.code,null,"DraggableProps")," 보면 드래그 하는 상태(dragging, dragged)와 엘리먼트 위치(x, y)를 확인할 수 있다. 또 드래그 이벤트 구현체인 ",p.createElement(a.code,null,"onDrag")," 메서드에서 ",p.createElement(a.code,null,"createDraggableData")," 함수를 이용해 엘리먼트 위치를 업데이트한다."),"\n",p.createElement(a.p,null,p.createElement(a.code,null,"createDraggableData")," 함수는 현재 위치, 이동한 델타 값 그리고 마지막 위치를 반환하고 있다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// /lib/utils.positionFns.js</span>\n\n<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createDraggableData</span><span class="token punctuation">(</span>draggable<span class="token operator">:</span> Draggable<span class="token punctuation">,</span> coreData<span class="token operator">:</span> DraggableData<span class="token punctuation">)</span><span class="token operator">:</span> DraggableData <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> scale <span class="token operator">=</span> draggable<span class="token punctuation">.</span>props<span class="token punctuation">.</span>scale<span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token punctuation">{</span>\n    node<span class="token operator">:</span> coreData<span class="token punctuation">.</span>node<span class="token punctuation">,</span>\n    x<span class="token operator">:</span> draggable<span class="token punctuation">.</span>state<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token punctuation">(</span>coreData<span class="token punctuation">.</span>deltaX <span class="token operator">/</span> scale<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    y<span class="token operator">:</span> draggable<span class="token punctuation">.</span>state<span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token punctuation">(</span>coreData<span class="token punctuation">.</span>deltaY <span class="token operator">/</span> scale<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    deltaX<span class="token operator">:</span> <span class="token punctuation">(</span>coreData<span class="token punctuation">.</span>deltaX <span class="token operator">/</span> scale<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    deltaY<span class="token operator">:</span> <span class="token punctuation">(</span>coreData<span class="token punctuation">.</span>deltaY <span class="token operator">/</span> scale<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    lastX<span class="token operator">:</span> draggable<span class="token punctuation">.</span>state<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n    lastY<span class="token operator">:</span> draggable<span class="token punctuation">.</span>state<span class="token punctuation">.</span>y\n  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"이를 통해 알 수 있는 것은 아이템의 현재 위치, 이동한 델타 값, 마지막 위치를 활용해서 위치를 업데이트 하는 것을 알 수 있다."),"\n",p.createElement(a.p,null,p.createElement(a.strong,null,"아이템 위치 업데이트하기")),"\n",p.createElement(a.p,null,"아이템의 현재 위치, 이동한 델타 값은 마우스 이벤트에서 제공하는 뷰포트의 좌표값인 ",p.createElement(a.code,null,"clientX"),", ",p.createElement(a.code,null,"clientY")," 를 사용하면 된다."),"\n",p.createElement(a.p,null,"먼저 마우스가 이동한 델타값을 구해보자. ",p.createElement(a.code,null,"현재 마우스 위치 - 마지막 마우스 위치")," 을 계산하면 된다."),"\n",p.createElement(a.p,null,"아이템의 위치는 아이템의 좌측 상단의 값으로 계산해줘야 한다. 아이템은 transform을 이용해 업데이트 하는데 transform의 기준은 아이템의 좌측 상단이기 때문이다. ",p.createElement(a.code,null,"현재 좌측 상단의 값 + 델타값")," 을 계산하면 된다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/6272fd071621e7bf9b1834253972ae4e/21b4d/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9C%84%EC%B9%98.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAADXUlEQVR42nWUa1NbVRSG+UdanaozVRkdDVBygQ6KtU4HWqmRMqVeaIttAhVoC0lOEgIIAaG5nXNyTkiABAI03AvNpQUK2ELrB2eE1g864z94PKF+qBQ/rL337D3z7DVrve8quJpQGZ97yG11EcOQgEl0URJ0cD7qJzG/gXVslGJJu5c9lCkeTEonRtmFQRYOjQKDIlCuuGi6qfDJpwFe0w/ydmWQN6tlGs9N801DgtcvjPLu1RRm9wSXukf4zH8bg2LDFBYwhg8CJQfFioP6gIfm76zEgjJdjl7aWt3cUSdIX5fYqJHY+krm8dchfqsVaezz8p5kRxcUKBI16EGgPuLG3N1O5YfFqLbrJMQwmaUsT7fW2EvdZ/eMj11zgD/MMrs1IgHJS9uCDeesQMO4QPFL0IL8oUiy0TQSYlyJM+LuYD2TYW0+R250kq2pOXI/9ZHUPsx86+H5ORnB18vpsXbOjwicjbk4Lr0ENMlOPhY7sE1H2cxukLmbJZte5cnWY/76fZeH6SRjvptEBm1MenvYOzNIjWWUI/396GU7JdKBGr4A2mifkNnb2WE9nWP7wep+OFvaiFy7hc9qZW02yaPMEo+cCt9bkrzfH9Sa2YFBcv4XmE+1RHXRMOTg3ojC38+f8eevm9SfOo3h6Af0mi+xHR3j2eYDcqkEE2oQz8AMukERYx4oHwIskh00q/2ot6xE+xwk/QHKj+m4WFlFc4OZHyu+ZLThBi31VWyvLBKMLFMRDKEPHwbUalCiOLnsc2G/UM1yLIT98hWOv1FIW10d8aFOKt46xskjhRjeOYqvs51oeo3qYb/WjA6tGc7Da2ibVshOTbIyFWN1aZ64KOPvdtNSe5basjI6LRa8Te1cMZ6iNTjAiWEPek1yrzjFpC06DXhjSmRuXmUhEWX7/oomnUWebK7j+KGRk4UfsTo7w/r4HKk6D0PuAT6PdlGqAY0HgfkLnabDtniIVCyC5O7jFynEsL+VbHScp3NLVOlKWYkl2LkWZuULgYtdDnSqA5N0iJfzNSjSMrROiCxk7+GPR7D1eegJeLXhcIeZzF16fD+TXJ7F3+FlwCJQr/ZSLL+a3Qvr/Xso1bxZItoxahIyKm6tg5oD9oVrpzzWtb+XDjvRD2tv/zNp8sB/AMf6KDdj2RAvAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="드래그 위치"\n        title=""\n        src="/static/6272fd071621e7bf9b1834253972ae4e/c1b63/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9C%84%EC%B9%98.png"\n        srcset="/static/6272fd071621e7bf9b1834253972ae4e/5a46d/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9C%84%EC%B9%98.png 300w,\n/static/6272fd071621e7bf9b1834253972ae4e/0a47e/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9C%84%EC%B9%98.png 600w,\n/static/6272fd071621e7bf9b1834253972ae4e/c1b63/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9C%84%EC%B9%98.png 1200w,\n/static/6272fd071621e7bf9b1834253972ae4e/21b4d/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9C%84%EC%B9%98.png 1280w"\n        sizes="(max-width: 1200px) 100vw, 1200px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",p.createElement(a.h2,null,"상세 구현 내용"),"\n",p.createElement(a.h3,null,"드래그 앤 드롭이벤트 구현하기"),"\n",p.createElement(a.p,null,"드래그 앤 드롭 이벤트를 구현하기 위해 ",p.createElement(a.code,null,"isDragging"),"인 상태를 추가했다. 이 상태 값이 true인 경우 ",p.createElement(a.code,null,"handleDrag")," 를 실행시킨다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token punctuation">[</span>isDragging<span class="token punctuation">,</span> setIsDragging<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">handleDragStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setIsDragging</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">handleDragStop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isDragging<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n\n  <span class="token function">setIsDragging</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">handleDrag</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isDragging<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n\n  <span class="token comment">// TODO: 아이템 위치 업데이트</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>isDragging<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'mousemove\'</span><span class="token punctuation">,</span> handleDrag<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">\'mousemove\'</span><span class="token punctuation">,</span> handleDrag<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>isDragging<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span>\n      <span class="token attr-name">onMouseDown</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleDragStart<span class="token punctuation">}</span></span>\n      <span class="token attr-name">onMouseUp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleDragStop<span class="token punctuation">}</span></span>\n    <span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",p.createElement(a.h3,null,"아이템 위치 업데이트 하기"),"\n",p.createElement(a.p,null,"아이템 위치를 업데이트하기 위해 아이템의 현재 위치, 이동한 델타 값, 마지막 위치 값이 필요하다."),"\n",p.createElement(a.p,null,"아이템의 현재 위치와 마지막 위치 정보를 저장하기 위해 ",p.createElement(a.code,null,"position")," 과 ",p.createElement(a.code,null,"last")," 상태 값을 추가했다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token comment">// 아이템 위치</span>\n<span class="token keyword">const</span> <span class="token punctuation">[</span>position<span class="token punctuation">,</span> setPosition<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 마지막 위치</span>\n<span class="token keyword">const</span> <span class="token punctuation">[</span>last<span class="token punctuation">,</span> setLast<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  x<span class="token operator">:</span> defaultPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n  y<span class="token operator">:</span> defaultPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"마우스가 이동한 델타 값은 현재 마우스 위치 - 마지막 마우스 위치 로 구할 수 있다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> deltaX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> last<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\n<span class="token keyword">const</span> deltaY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> last<span class="token punctuation">.</span>y<span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"마지막으로 아이템의 위치를 업데이트할 값인 좌측 상단의 값은 ",p.createElement(a.code,null,"현재 좌측 상단의 값 + 델타값")," 로 구하면 된다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> deltaX <span class="token operator">=</span> position<span class="token punctuation">.</span>x <span class="token operator">+</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> last<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\n<span class="token keyword">const</span> deltaY <span class="token operator">=</span> position<span class="token punctuation">.</span>y <span class="token operator">+</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> last<span class="token punctuation">.</span>y<span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"구한 delta값으로 아이템의 위치를 업데이트 하면 끝이다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx">ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaX<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaY<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"전체 코드는 이렇다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token punctuation">[</span>isDragging<span class="token punctuation">,</span> setIsDragging<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 아이템 위치</span>\n<span class="token keyword">const</span> <span class="token punctuation">[</span>position<span class="token punctuation">,</span> setPosition<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token comment">// 마지막 위치</span>\n<span class="token keyword">const</span> <span class="token punctuation">[</span>last<span class="token punctuation">,</span> setLast<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  x<span class="token operator">:</span> defaultPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n  y<span class="token operator">:</span> defaultPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">handleDragStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span>\n  e<span class="token operator">:</span> MouseEvent <span class="token operator">|</span> React<span class="token punctuation">.</span>MouseEvent<span class="token operator">&lt;</span>HTMLDivElement<span class="token punctuation">,</span> MouseEvent<span class="token operator">></span>\n<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setLast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setIsDragging</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">handleDragStop</span> <span class="token operator">=</span> <span class="token punctuation">(</span>\n  e<span class="token operator">:</span> MouseEvent <span class="token operator">|</span> React<span class="token punctuation">.</span>MouseEvent<span class="token operator">&lt;</span>HTMLDivElement<span class="token punctuation">,</span> MouseEvent<span class="token operator">></span>\n<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isDragging<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n\n  <span class="token function">setIsDragging</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">handleDrag</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isDragging<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>\n  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">const</span> deltaX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> last<span class="token punctuation">.</span>x <span class="token operator">+</span> position<span class="token punctuation">.</span>x<span class="token punctuation">;</span>\n  <span class="token keyword">const</span> deltaY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> last<span class="token punctuation">.</span>y <span class="token operator">+</span> position<span class="token punctuation">.</span>y<span class="token punctuation">;</span>\n\n  <span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> deltaX<span class="token punctuation">,</span> y<span class="token operator">:</span> deltaY <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setLast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaX<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaY<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>isDragging<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'mousemove\'</span><span class="token punctuation">,</span> handleDrag<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">\'mousemove\'</span><span class="token punctuation">,</span> handleDrag<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>isDragging<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>\n      <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span>\n      <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>\n        position<span class="token operator">:</span> <span class="token string">\'absolute\'</span><span class="token punctuation">,</span>\n        top<span class="token operator">:</span> defaultPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span>\n        left<span class="token operator">:</span> defaultPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">}</span></span>\n      <span class="token attr-name">onMouseDown</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleDragStart<span class="token punctuation">}</span></span>\n      <span class="token attr-name">onMouseUp</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleDragStop<span class="token punctuation">}</span></span>\n    <span class="token punctuation">></span></span><span class="token plain-text">\n      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">\n    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>\n  <span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",p.createElement(a.h3,null,"화면 밖으로 벗어나지 않기"),"\n",p.createElement(a.p,null,"드래그는 이제 잘 된다! 그러나 아이템이 화면 밖으로 벗어나는 문제점이 있다. 상하좌우 밖으로 벗어나지 않도록 개선해보자."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/1460bf097cfe00a93c869ac9a47d0faf/a2b91/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 55.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABhElEQVR42o2SW0sCYRCG/WUhRXnajOgiCIN+gBAYhCkWeKPmnjzialaW7llNLQ8R1EXQz3qb3Uwy1/LiYZaZ93t35vvGdXyrINEzEO7egVE5bKv8FxqPHSI4jT+/Z5pfBFUBrlTeQKhbR6hdnisGFB4e2ULAVkuAx0IW7JxVW2qYzd1jQ+FIxE6TPPx04LDDITZiEZtkiDTiz2nExhnExyxCJmdrgk6GeamFgCbOFRhiV+exb1JHUhPuogZ3QcV66QYHpog9XbA1zh0qBvw0SnDhbjhstnI4El+RqHwgWhxiLd6FTynM3/WCoanB3+QcDRk1h6T5job2Arbex8n1G+Xzdm2p4UWxBEYTHATWT0Rc9vsQiaSu4Hw4oFcW/+7wLJWHVxEWLvj7gSKdGk71GqKGhEi7unRlZoZhqUoj8w4jT0UydWNtAEVG5v4x5OFidBEBa1VoDK/M0p5lZ/jIaFW80+hi1QbKAxmlvobKowrpqWNTHXZRn/RW4mr0gMpAp3NtfAIscDm9nbkYHQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="화면 밖으로 나가기"\n        title=""\n        src="/static/1460bf097cfe00a93c869ac9a47d0faf/c1b63/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png"\n        srcset="/static/1460bf097cfe00a93c869ac9a47d0faf/5a46d/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png 300w,\n/static/1460bf097cfe00a93c869ac9a47d0faf/0a47e/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png 600w,\n/static/1460bf097cfe00a93c869ac9a47d0faf/c1b63/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png 1200w,\n/static/1460bf097cfe00a93c869ac9a47d0faf/d61c2/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png 1800w,\n/static/1460bf097cfe00a93c869ac9a47d0faf/97a96/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png 2400w,\n/static/1460bf097cfe00a93c869ac9a47d0faf/a2b91/%ED%99%94%EB%A9%B4-%EB%B0%96%EC%9C%BC%EB%A1%9C-%EB%82%98%EA%B0%80%EA%B8%B0.png 3360w"\n        sizes="(max-width: 1200px) 100vw, 1200px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}}),"\n",p.createElement(a.p,null,p.createElement(a.strong,null,"상단 밖으로 벗어나는 경우")),"\n",p.createElement(a.p,null,p.createElement(a.code,null,"아이템의 초기 y + 델타 y")," 이 0보다 작은 경우 상단 밖으로 벗어나는 케이스이다. 아이템을 상단에 고정시키기 위해 ",p.createElement(a.code,null,"-아이템의 초기 y")," 로 위치를 업데이트 하면 된다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token function-variable function">fixToTop</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ref<span class="token operator">:</span> HTMLDivElement<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> deltaX<span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token operator">-</span>defaultPosition<span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setLast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ref<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaX<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">-</span>defaultPosition<span class="token punctuation">.</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,p.createElement(a.strong,null,"하단 밖으로 벗어나는 경우")),"\n",p.createElement(a.p,null,p.createElement(a.code,null,"아이템의 초기 y + 델타 y + 아이템의 높이")," 가 뷰포트의 높이보다 큰 경우 하단 밖으로 벗어나는 케이스이다. 아이템을 하단에 고정시키기 위해 ",p.createElement(a.code,null,"뷰포트 높이 - 아이템 높이 - 아이템의 초기 y")," 로 위치를 업데이트 하면 된다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> eleHeight <span class="token operator">=</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span>clientHeight <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">fixToBottom</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ref<span class="token operator">:</span> HTMLDivElement<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> deltaX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> eleHeight <span class="token operator">-</span> defaultPosition<span class="token punctuation">.</span>y<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setLast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ref<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaX<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>\n    window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> eleHeight <span class="token operator">-</span> defaultPosition<span class="token punctuation">.</span>y\n  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,p.createElement(a.strong,null,"좌측 밖으로 벗어나는 경우")),"\n",p.createElement(a.p,null,"아이템이 상단 밖으로 벗어나는 경우처럼 계산하면 된다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token function-variable function">fixToLeftTop</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ref<span class="token operator">:</span> HTMLDivElement<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token operator">-</span>defaultPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token operator">-</span>defaultPosition<span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setLast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ref<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">-</span>defaultPosition<span class="token punctuation">.</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">-</span>defaultPosition<span class="token punctuation">.</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,p.createElement(a.strong,null,"우측 밖으로 벗어나는 경우")),"\n",p.createElement(a.p,null,"아이템이 하단 밖으로 벗어나는 경우처럼 계산하면 된다."),"\n",p.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> eleWidth <span class="token operator">=</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span>clientWidth <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">fixToRight</span> <span class="token operator">=</span> <span class="token punctuation">(</span>ref<span class="token operator">:</span> HTMLDivElement<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">setPosition</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> eleWidth <span class="token operator">-</span> defaultPosition<span class="token punctuation">.</span>x<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> deltaY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token function">setLast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n    x<span class="token operator">:</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span>\n    y<span class="token operator">:</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ref<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">translate(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>\n    window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> eleWidth <span class="token operator">-</span> defaultPosition<span class="token punctuation">.</span>x\n  <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>deltaY<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",p.createElement(a.p,null,"여기서 대각선 방향으로 벗어나는 경우까지 추가하면 외부로 벗어나지 않는 드래그 이벤트를 구현할 수 있다."),"\n",p.createElement(a.img,{src:"/369b7385eb823f18640e86533c3d6f9f/%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EA%B5%AC%ED%98%84.gif",alt:"드래그 이벤트 구현"}),"\n",p.createElement(a.h2,null,"마무리"),"\n",p.createElement(a.p,null,"드래그 이벤트를 구현하면서 뷰포트, 마우스 좌표값을 활용하는 것을 익힐 수 있었다. 또한 라이브러리 의존성을 성공적으로 제거하여 구현 능력을 키울 수 있었다."))}var e=function(n){void 0===n&&(n={});const{wrapper:a}=Object.assign({},(0,t.a)(),n.components);return a?p.createElement(a,n,p.createElement(o,n)):o(n)},c=s(4160),l=s(4098),u=s(1858),i=s(8032),r=s(9542);const k={Link:c.rU};function g(n){let{data:a,children:s}=n;const{frontmatter:o}=a.mdx,e=(0,r.E)(o.thumbnail);return p.createElement(p.Fragment,null,p.createElement(l.h,null),p.createElement(u.A,null,p.createElement(t.Z,{components:Object.assign({ul:n=>p.createElement("ul",Object.assign({},n,{style:{listStyle:"revert"}})),ol:n=>p.createElement("ul",Object.assign({},n,{style:{listStyleType:"decimal"}}))},k)},p.createElement("article",{className:"markdown-body"},p.createElement("h1",null,o.title),e&&p.createElement("div",{style:{position:"relative",width:"100%",paddingBottom:"56.25%"}},p.createElement(i.G,{image:e,alt:o.title,className:"absolute top-0 left-0 w-full h-full object-cover"})),s))))}function d(n){return p.createElement(g,n,p.createElement(e,n))}},9542:function(n,a,s){s.d(a,{E:function(){return t}});const t=n=>{if(n)return"childImageSharp"in n?n.childImageSharp.gatsbyImageData:n}},1151:function(n,a,s){s.d(a,{Z:function(){return c},a:function(){return e}});var t=s(7294);const p={},o=t.createContext(p);function e(n){const a=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(a):{...a,...n}}),[a,n])}function c(n){let a;return a=n.disableParentContext?"function"==typeof n.components?n.components(p):n.components||p:e(n.components),t.createElement(o.Provider,{value:a},n.children)}}}]);
//# sourceMappingURL=component---src-templates-post-tsx-content-file-path-src-content-드래그-이벤트-구현기-1-index-mdx-7ef5c8049ef3696f1485.js.map