"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[854],{8340:function(n,A,a){a.r(A),a.d(A,{default:function(){return E}});var s=a(1151),t=a(7294),e="data:image/gif;base64,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";function p(n){const A=Object.assign({p:"p",h2:"h2",img:"img",ol:"ol",li:"li",code:"code",h3:"h3",span:"span",ul:"ul",hr:"hr",a:"a"},(0,s.ah)(),n.components);return t.createElement(t.Fragment,null,t.createElement(A.p,null,"프로젝트에서 한글 입력 시 마지막 글자가 지워지지 않는 IME 버그를 겪었습니다. “유닛 테스트에서 잡을 수 있었다면 좋았을 텐데…” 싶어 앞으로는 TDD도 해보자는 마음으로 Jest로 폼 테스트를 학습해봤습니다.\n그런데 예상과 달리 Jest에선 이 문제가 드러나지 않고 테스트가 성공했습니다."),"\n",t.createElement(A.p,null,"이번 글은 그 과정에서 배운 Jest 디바운스 테스트와 API 모킹 경험, 그리고 브라우저 환경에서의 E2E 테스트가 필요한 이유를 정리한 글입니다."),"\n",t.createElement(A.h2,null,"테스트할 기능"),"\n",t.createElement(A.p,null,"테스트할 기능은 입력 후 API 호출로 메타데이터를 불러오는 기능입니다."),"\n",t.createElement(A.img,{src:"/4b23136163244baf99fc5d84ab837c6c/%E1%84%85%E1%85%B5%E1%86%BC%E1%84%8F%E1%85%B3%E1%84%86%E1%85%B5%E1%84%85%E1%85%B5%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5.gif",alt:"링크미리보기.gif"}),"\n",t.createElement(A.ol,null,"\n",t.createElement(A.li,null,"사용자가 링크를 입력한다."),"\n",t.createElement(A.li,null,"해당 링크로 API 요청을 보내 메타데이터를 가져온다."),"\n",t.createElement(A.li,null,"결과를 화면에 표시한다."),"\n"),"\n",t.createElement(A.p,null,"여기서 입력이 변경될 때마다 불필요한 API 요청이 발생하지 않도록 ",t.createElement(A.code,null,"2000ms")," 디바운스를 적용했습니다."),"\n",t.createElement(A.h3,null,"디바운스 모방하기"),"\n",t.createElement(A.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> urlInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token function">getByLabelText</span><span class="token punctuation">(</span><span class="token string">\'링크\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nfireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>urlInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">\'https://www.naver.com/\'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">await</span> <span class="token function">act</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  jest<span class="token punctuation">.</span><span class="token function">advanceTimersByTime</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 디바운스 적용</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(A.ul,null,"\n",t.createElement(A.li,null,t.createElement(A.code,null,"jest.advanceTimersByTime(ms)")," : 지정한 ms만큼 시간이 흐른 것처럼 시뮬레이션"),"\n"),"\n",t.createElement(A.p,null,"테스트 후에는 타이머를 초기화해줍니다."),"\n",t.createElement(A.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  jest<span class="token punctuation">.</span><span class="token function">clearAllTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  jest<span class="token punctuation">.</span><span class="token function">useRealTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(A.h3,null,"API 요청 mocking하기"),"\n",t.createElement(A.p,null,"실제 API 호출을 막기 위해 msw로 응답을 모킹했습니다."),"\n",t.createElement(A.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> handlers <span class="token operator">=</span> <span class="token punctuation">[</span>\n  rest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">API_BASE_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/link/metadata</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token function">res</span><span class="token punctuation">(</span>\n      ctx<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      ctx<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n        <span class="token literal-property property">metaDescription</span><span class="token operator">:</span> <span class="token string">\'링크 설명\'</span><span class="token punctuation">,</span>\n        <span class="token literal-property property">metaThumbnail</span><span class="token operator">:</span> <span class="token string">\'링크 썸네일\'</span><span class="token punctuation">,</span>\n        <span class="token literal-property property">metaTitle</span><span class="token operator">:</span> <span class="token string">\'링크 타이틀\'</span><span class="token punctuation">,</span>\n        <span class="token literal-property property">titleText</span><span class="token operator">:</span> <span class="token string">\'타이틀 텍스트\'</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(A.h3,null,"해시태그 입력 테스트하기"),"\n",t.createElement(A.p,null,"엔터 키 입력 시 해시태그가 추가되도록 구현했습니다. 아래 이미지처럼 현재 한글로 해시태그를 입력하는 경우에는 마지막 글자인 ‘녕’이 input에 남아있는 문제가 있습니다."),"\n",t.createElement("img",{src:e,alt:"해시태그 입력",style:{width:"100%"}}),"\n",t.createElement(A.p,null,"문제 시나리오에 대해서 테스트 코드를 작성했습니다."),"\n",t.createElement(A.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">\'해시 태그 입력 테스트\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token function">test</span> <span class="token punctuation">(</span><span class="token string">\'여러 개의 해시 태그를 입력하면, 입력한 해시 태그의 수만큼 Chip 컴포넌트가 렌더링된다.\'</span><span class="token punctuation">,</span>\n  <span class="token comment">// 해시태그 추가</span>\n  fireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>tagInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">\'안녕\'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  fireEvent<span class="token punctuation">.</span><span class="token function">keyDown</span><span class="token punctuation">(</span>tagInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">\'Enter\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// input value가 빈값이어야 함</span>\n  <span class="token function">expect</span><span class="token punctuation">(</span>tagInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token operator">:</span>\n\n\n  <span class="token comment">// 연달아 새로운 해시태그 추가</span>\n  fireEvent<span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span>tagInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">\'하이\'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  fireEvent<span class="token punctuation">.</span><span class="token function">keyDown</span><span class="token punctuation">(</span>tagInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">\'Enter\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// input value가 빈값이어야 함</span>\n  <span class="token function">expect</span> <span class="token punctuation">(</span>tagInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token comment">// ...</span></code></pre></div>'}}),"\n",t.createElement(A.p,null,"하지만 테스트 결과는 실패하지 않고, 성공하고 말았습니다... ",t.createElement(A.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 901px; "\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/9925681866a7fcac1d26769d190baaf3/0955e/%EC%96%91%EC%84%B1%EA%B1%B0%EC%A7%93.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 13.666666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfElEQVR42m2OSwrDMAxEcwuH+P93ahuve4Le/0RTJGhIoIvHGy000hY/b9RcMMZA7x0xRjjn4L3nvNbCnBPneSKlBCHEX/Z9Z2/p1a4yWmytXdRaGSpTSkFK+eA4DuaXyZu2BjlnhBAYKiilsOnDO1prGGNgrWXuMx0kfwGdIFNMebeL2wAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        alt="양성거짓"\n        title=""\n        src="/static/9925681866a7fcac1d26769d190baaf3/0955e/%EC%96%91%EC%84%B1%EA%B1%B0%EC%A7%93.png"\n        srcset="/static/9925681866a7fcac1d26769d190baaf3/5a46d/%EC%96%91%EC%84%B1%EA%B1%B0%EC%A7%93.png 300w,\n/static/9925681866a7fcac1d26769d190baaf3/0a47e/%EC%96%91%EC%84%B1%EA%B1%B0%EC%A7%93.png 600w,\n/static/9925681866a7fcac1d26769d190baaf3/0955e/%EC%96%91%EC%84%B1%EA%B1%B0%EC%A7%93.png 901w"\n        sizes="(max-width: 901px) 100vw, 901px"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n        loading="lazy"\n        decoding="async"\n      />\n  </a>\n    </span>'}})),"\n",t.createElement(A.h2,null,"Jest에서는 왜 성공할까?"),"\n",t.createElement(A.p,null,"한글이 input에 여전히 남는 원인은 IME 입니다. ",t.createElement(A.code,null,"ㅇ ㅑ ㅎ ㅗ")," 를 순서대로 입력하면 자음과 모음을 조합해 ",t.createElement(A.code,null,"야호")," 를 출력합니다. 브라우저에서는 이 조합 과정을 ",t.createElement(A.code,null,"compositionstart"),", ",t.createElement(A.code,null,"compositionend"),"같은 이벤트가 발생합니다. 하지만, Jest는 `야호’라는 value의 값을 넣었을 때, 이미 조합이 완료된 값을 넣으므로 마지막 글자가 남지 않아 해당 버그는 재현되지 않습니다."),"\n",t.createElement(A.h2,null,"브라우저 E2E 테스트 필요성"),"\n",t.createElement(A.p,null,"Jest만으론 브라우저가 가진 특징을 재현하기 어려운걸 깨달았습니다. 이를 보완할 수 있는 Cypress나 Playwright와 같은 E2E 도구의 필요성을 느꼈습니다."),"\n",t.createElement(A.hr),"\n",t.createElement(A.p,null,"참고"),"\n",t.createElement(A.ul,null,"\n",t.createElement(A.li,null,t.createElement(A.a,{href:"https://ko.wikipedia.org/wiki/%EC%9E%85%EB%A0%A5%EA%B8%B0"},"https://ko.wikipedia.org/wiki/입력기")),"\n",t.createElement(A.li,null,t.createElement(A.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionstart_event"},"https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionstart_event")),"\n",t.createElement(A.li,null,t.createElement(A.a,{href:"https://ui.toast.com/posts/ko_20220624"},"https://ui.toast.com/posts/ko_20220624")),"\n",t.createElement(A.li,null,t.createElement(A.a,{href:"https://minjung-jeon.github.io/IME-keyCode-229-issue/"},"https://minjung-jeon.github.io/IME-keyCode-229-issue/")),"\n"))}var o=function(n){void 0===n&&(n={});const{wrapper:A}=Object.assign({},(0,s.ah)(),n.components);return A?t.createElement(A,n,t.createElement(p,n)):p(n)},c=a(4160),l=a(4098),u=a(1858),i=a(8032),r=a(9542);const k={Link:c.rU};function g(n){let{data:A,children:a}=n;const{frontmatter:e}=A.mdx,p=(0,r.E)(e.thumbnail);return t.createElement(t.Fragment,null,t.createElement(l.h,null),t.createElement(u.A,null,t.createElement(s.Zo,{components:Object.assign({ul:n=>t.createElement("ul",Object.assign({},n,{style:{listStyle:"revert"}})),ol:n=>t.createElement("ul",Object.assign({},n,{style:{listStyleType:"decimal"}}))},k)},t.createElement("article",{className:"markdown-body"},t.createElement("h1",null,e.title),p&&t.createElement("div",{style:{position:"relative",width:"100%",paddingBottom:"56.25%"}},t.createElement(i.G,{image:p,alt:e.title,className:"absolute top-0 left-0 w-full h-full object-cover"})),a))))}function E(n){return t.createElement(g,n,t.createElement(o,n))}},9542:function(n,A,a){a.d(A,{E:function(){return s}});const s=n=>{if(n)return"childImageSharp"in n?n.childImageSharp.gatsbyImageData:n}},1151:function(n,A,a){a.d(A,{Zo:function(){return o},ah:function(){return e}});var s=a(7294);const t=s.createContext({});function e(n){const A=s.useContext(t);return s.useMemo((()=>"function"==typeof n?n(A):{...A,...n}),[A,n])}const p={};function o({components:n,children:A,disableParentContext:a}){let o;return o=a?"function"==typeof n?n({}):n||p:e(n),s.createElement(t.Provider,{value:o},A)}}}]);
//# sourceMappingURL=component---src-templates-post-tsx-content-file-path-src-content-jest에선-성공인데-브라우저에선-실패-index-mdx-eee30e66226e65807b12.js.map