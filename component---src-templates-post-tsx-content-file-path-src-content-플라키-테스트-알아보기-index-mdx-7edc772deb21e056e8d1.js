"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[368],{9891:function(e,n,t){t.r(n),t.d(n,{default:function(){return E}});var l=t(1151),a=t(7294);function s(e){const n=Object.assign({p:"p",h2:"h2",ul:"ul",li:"li",ol:"ol",h3:"h3",code:"code",span:"span",hr:"hr",a:"a"},(0,l.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"본 글은 webdriverIO 기준으로 GPT의 도움을 받아 학습한 내용입니다."),"\n",a.createElement(n.h2,null,"플라키 테스트란?"),"\n",a.createElement(n.p,null,"같은 조건이지만 테스트 할 때마다 결과가 달라지는 현상을 말한다."),"\n",a.createElement(n.p,null,"플라키 테스트는 이런 문제점이 있다."),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"개발 생산성 저하"),"\n",a.createElement(n.li,null,"테스트 결과 신뢰도 하락"),"\n",a.createElement(n.li,null,"실패 원인 분석 비용 증가"),"\n"),"\n",a.createElement(n.h2,null,"플라키 테스트가 발생하는 원인"),"\n",a.createElement(n.ol,null,"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"네트워크 상태"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"API 응답 지연으로 UI가 완전히 렌더링 되지 않는 경우 (예: 스켈레톤 UI)"),"\n",a.createElement(n.li,null,"로그인 버튼 터치 후, 마이페이지로 이동할 때 네트워크가 느려 페이지 렌더링이 오래걸림"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"느린 렌더링"),"\n",a.createElement(n.p,null,"DOM에는 이미 존재하지만 아직 인터렉션이 가능한 상태가 아닌 경우"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"저사양 디바이스"),"\n",a.createElement(n.li,null,"CI 환경"),"\n",a.createElement(n.li,null,"리액트 리스트 렌더링이 아직 끝나지 않은 상태"),"\n",a.createElement(n.li,null,"모달/바텀시트 애니메이션이 진행 중인 상태"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(n.p,null,"테스트 실행 타이밍"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"동기적 단언으로 인해 retry를 하지 않는 경우"),"\n",a.createElement(n.li,null,"버튼 클릭 직후 UI 업데이트 전에 검증하는 경우"),"\n"),"\n"),"\n"),"\n",a.createElement(n.h2,null,"어떻게 다루면 좋을까?"),"\n",a.createElement(n.h3,null,"비동기 단언 사용하기"),"\n",a.createElement(n.p,null,"비동기적으로 변하는 상태는 조건이 만족될 때까지 기다리며 검증한다. 예를 들어서 버튼을 누르고 1초 후에 ‘Hello Wrold!’ 라고 텍스트가 표시되는 것을 검증한다면, ",a.createElement(n.code,null,"getText"),"가 아닌 타임아웃 내에 성공할때까지 retry를 하는 ",a.createElement(n.code,null,"toHaveText")," 메소드를 사용한다."),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// Bad</span>\n<span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> textElement<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">\'Hello World!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Good</span>\n<span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>textElement<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveText</span><span class="token punctuation">(</span><span class="token string">\'Hello World!\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",a.createElement(n.h3,null,"테스트 retry 하기"),"\n",a.createElement(n.p,null,"최후의 수단으로 외부 상태가 오염됐을 때(DB, 로그인 실패 등) 테스트 전체를 새 인스턴스에서 시작할 수 있다. 또한 플라키 테스트를 탐지 하기 위해 ",a.createElement(n.code,null,"—repeat")," 옵션으로 여러번 실행해 불안정한 테스트를 식별할 수 있다."),"\n",a.createElement(n.hr),"\n",a.createElement(n.p,null,"참고"),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://webdriver.io/docs/debugging/#debugging-flaky-tests"},"https://webdriver.io/docs/debugging/#debugging-flaky-tests")),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://webdriver.io/docs/retry/"},"https://webdriver.io/docs/retry/")),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://www.codewithjason.com/what-causes-flaky-tests/"},"https://www.codewithjason.com/what-causes-flaky-tests/")))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.ah)(),e.components);return n?a.createElement(n,e,a.createElement(s,e)):s(e)},r=t(4160),o=t(8032),u=t(9542),p=t(4222);const i={Link:r.rU};function m(e){let{data:n,children:t}=e;const{frontmatter:s}=n.mdx,c=(0,u.E)(s.thumbnail);return a.createElement(p.X,null,a.createElement("div",{style:{marginTop:"40px"}},a.createElement(l.Zo,{components:Object.assign({ul:e=>a.createElement("ul",Object.assign({},e,{style:{listStyle:"revert"}})),ol:e=>a.createElement("ul",Object.assign({},e,{style:{listStyleType:"decimal"}}))},i)},a.createElement("article",{className:"markdown-body"},a.createElement("h1",null,s.title),c&&a.createElement("div",{style:{position:"relative",width:"100%",paddingBottom:"56.25%"}},a.createElement(o.G,{image:c,alt:s.title,className:"absolute top-0 left-0 w-full h-full object-cover"})),t))))}function E(e){return a.createElement(m,e,a.createElement(c,e))}},9542:function(e,n,t){t.d(n,{E:function(){return l}});const l=e=>{if(e)return"childImageSharp"in e?e.childImageSharp.gatsbyImageData:e}},1151:function(e,n,t){t.d(n,{Zo:function(){return r},ah:function(){return s}});var l=t(7294);const a=l.createContext({});function s(e){const n=l.useContext(a);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}const c={};function r({components:e,children:n,disableParentContext:t}){let r;return r=t?"function"==typeof e?e({}):e||c:s(e),l.createElement(a.Provider,{value:r},n)}}}]);
//# sourceMappingURL=component---src-templates-post-tsx-content-file-path-src-content-플라키-테스트-알아보기-index-mdx-7edc772deb21e056e8d1.js.map